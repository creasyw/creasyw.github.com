
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Qiong Wu</title>
  <meta name="author" content="Qiong Wu">

  
  <meta name="description" content="The rate selection of the driver is working as follow: firstly, identify the initial link speed with the FUNCTION &#8220;MlmeUpdateTxRates&#8221; in &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://creasyw.github.io/blog/page/12/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <!-- add Mathjex.js by qiong -->
  <script src="http://kramdown.rubyforge.org/MathJax/MathJax.js" type="text/javascript"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="./atom.xml" rel="alternate" title="Qiong Wu" type="application/atom+xml">
  
  <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  
  
  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Qiong Wu</a></h1>
  <!--
  
    <h2>A blogging framework for hackers.</h2>
  
  -->
</hgroup>
</header>
  <nav role="navigation"><!--
<ul class="subscription" data-subscription="rss">
  <li><a href="./atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:creasyw.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

-->

<ul class="main-navigation">
  <!--<li><a class="yellow" href="/">Hello</a></li>-->
  <li><a class="github" href="/blog/archives/">Blog</a></li>
  <li><a class="github" href="/tags">Tags</a></li>
  <li><a class="github" href="http://www.github.com/creasyw">Github</a></li>
  <li><a class="github" href="https://twitter.com/creasywuqiong">Twitter</a></li>
  <li><a class="github" href="/rss">RSS</a></li>
</ul>


</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/09/01/rate-adaptation-for-rt2870/">Rate Adaptation for RT2870</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-09-01T00:00:00-05:00" pubdate data-updated="true">Sep 1<span>st</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<span class="Apple-style-span" style="border-collapse: collapse; font-family: arial, sans-serif; font-size: 13px;">The rate selection of the driver is working as follow: firstly, identify the initial link speed with the FUNCTION &#8220;MlmeUpdateTxRates&#8221; in mlme.c, then set the transmition rate with FUNCTION &#8220;SetCommonHT&#8221; in cmm_info.c. Specifically the FUNCTION &#8220;RTMPSetDesiredRates&#8221; in \common\cmm_info.c is to set 802.11a/b/g data rate; and FUNCTION &#8220;RTMPSetHT&#8221;, &#8220;RTMPSetIndividualHT&#8221;, and &#8220;RTMPUpdateHTIE&#8221; in the same file are to set the 802.11n data rate, where set its value according to desired rate according to input parameter and bandwidth.</span><span class="Apple-style-span" style="border-collapse: collapse; font-family: arial, sans-serif; font-size: 13px;"><br /></span><span class="Apple-style-span" style="border-collapse: collapse; font-family: arial, sans-serif; font-size: 13px;"><br /></span><span class="Apple-style-span" style="border-collapse: collapse; font-family: arial, sans-serif; font-size: 13px;">The FUNCTION &#8220;MlmeUpdateHtTxRates&#8221; in \include\mlme.c is to update the data rate used in 802.11n scenario. The update decision is made based on the desired PHY layer infromation saved in a struct, the updated channel parameters provided by FUNCTION &#8220;RTMPCheckHt&#8221; in the same file, and more importantly, the calculation provided by FUNCITON &#8220;MlmeSelectTxRateTable&#8221;. The three function mentioned about communication with each other mainly via the array MCSSet[16], whose definition is in file \include\mlme.h.</span><span class="Apple-style-span" style="border-collapse: collapse; font-family: arial, sans-serif; font-size: 13px;"><br /></span><span class="Apple-style-span" style="border-collapse: collapse; font-family: arial, sans-serif; font-size: 13px;"><br /></span><span class="Apple-style-span" style="border-collapse: collapse; font-family: arial, sans-serif; font-size: 13px;">Furthermore, your advice about the rate selection range help me find the definition of high throughput in file \include\rtmp_def.h, where has two groups of transition rate: 0 to 7 (6Mbps to 54Mbps) for OFDM, and 0 to 33 (MCS_0 to MCS_32, and MCS_33 is auto-rate). As long as the dongle we chose have two transmission antennas, we can use MCS_0 to MCS_15, corresponding&nbsp; up to 300Mbps. This can be set in file \common\cmm_profile.c, triggered by key words &#8220;FixedTxMode&#8221; or &#8220;HT_TxStream&#8221;. However, because the algorithm will check the status of channel every time it updates the date rate, the original algorithm cannot set the rate to a specific number all the time.</span></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/08/31/configuration-of-testbed/">Configuration of the Testbed</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-08-31T00:00:00-05:00" pubdate data-updated="true">Aug 31<span>st</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
# all the machines should be upgraded to ubuntu 10.04 #<br /><br />PRE INSTALLATION<br />&#8212;&#8212;&#8212;&#8212;&#8212;-<br />- note down the ip address of the eth0 interface<br /><br />INSTALLING UBUNTU<br />&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;<br />- use the 10.04 ISO image from the CD<br />- make sure the Fedora 4 partition is formatted and wiped out<br />- use the username: lili, password: interference-<machine-name><br />&nbsp;&nbsp;&nbsp; - for instance, if m/c name: ut-mesh-d-14.csres.utexas.edu; then password: interference-d14<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if m/c name: ut-mesh-14.csres.utexas.edu; then password: interference-14<br /><br /><br />POST INSTALLATION<br />&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;<br />A. Configuring the network interfaces<br />- /etc/resolv.conf: create this file if it doesn&#8217;t exist and use the following entries<br />search public.utexas.edu<br />nameserver 128.83.139.9<br /><br />- /etc/network/interfaces: add the entry<br /><br />auto eth0<br />iface eth0 inet static<br />address <ip_address here=""><br />gateway 128.83.141.1<br />netmask 255.255.255.0<br />network 128.83.141.0<br />broadcast 128.83.141.255<br /><br />- sudo service network-manager stop (kills the network manager service, we don&#8217;t need it)<br /><br />- sudo /etc/init.d/networking restart<br />&nbsp; - try connecting to the internet, should work!<br /><br />INSTALLING VIM, SSH and WIRESHARK<br />&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;<br />- open the Administration-&gt;Synaptic Packet Manager. Click Reload. (updates the package manager). Close the package manager.<br />- sudo apt-get install ssh<br />- sudo apt-get install vim<br />- sudo apt-get install wireshark<br /><br />ADD RSA key of the host machine to this remote machine<br />&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;<br />- generate rsa key on the host machine using <br />&nbsp;&nbsp;&nbsp; ssh-keygen -t rsa1 <br />- cat ~/.ssh/<rsa dump="" file=""> &gt;&gt; ~/.ssh/authorized_keys@remote_machine<br />- chmod 600 ~/.ssh/authorized_keys@remote_machine<br /><br />Update the SUDOERS file<br />&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;<br />- sudo visudo<br />- <begins><br />User_Alias FULLTIMERS=lili<br />lili&nbsp;&nbsp;&nbsp; ALL=NOPASSWD:ALL<br />FULLTIMERS ALL = NOPASSWD: ALL<br />&nbsp; <ends><br /><br />Remove ath5k and install madwifi<br />&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-<br />http://art.ubuntuforums.org/showthread.php?t=1163380<br /><br />IMPORTANT<br />&#8212;&#8212;&#8211;<br />Driver Bug: Do not try to perform channel switch in the master mode; causes a hard freeze (Ref: http://madwifi-project.org/ticket/1903)<br /></ends></begins></rsa></ip_address></machine-name></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/14/python-editor-ide/">Python Editor & IDE</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-14T00:00:00-05:00" pubdate data-updated="true">Jul 14<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
留个印儿，待用。<br /><a href="http://www.vim.org/scripts/script.php?script_id=790">vim</a><br /><a href="http://ulipad.appspot.com/">ulipad</a><br /><a href="http://eric-ide.python-projects.org/">eric</a><br /><a href="http://pydev.org/">pydev</a><br /><a href="http://www.gnu.org/software/emacs/">emacs</a><br /><a href="http://www.eclipse.org/">eclipse</a><br /><a href="http://netbeans.org/">netbeans</a><br /><br /><a href="http://www.activestate.com/komodo-edit">komodo</a><br /><a href="http://www.wingware.com/">wingIDE</a><br />(the last two are commercial software)<br /><a href="http://www.douban.com/group/topic/12614469/">douban</a><br /><br />Learning to program is like learning to write good natural language. The best way to do it is to read some stuff written by masters of the form, write some things yourself, read a lot more, write a little more, read a lot more, write some more &#8230; and repeat until your writing begins to develop the kind of strength and economy you see in your models.<br /><br />ps.今天看到篇很棒的文章《<a href="http://catb.org/%7Eesr/faqs/hacker-howto.html#skills1">How to become a hacker</a>》。文章很长，分期分批的看吧，里面的路线图以及很多思想当真是值得借鉴的。豆瓣小组当真是个好地方=]</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/11/funny-words/">Funny Words</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-11T00:00:00-05:00" pubdate data-updated="true">Jul 11<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
韩乔生老师最牛的一次解说<br /><br />—7号球员夏普分球，传给了9号队员，9号队员也叫夏普，他们可能是兄弟。<br />—在足坛活跃着很多兄弟，比如荷兰的德波尔兄弟，爱尔兰的基恩兄弟（韩老师到底也没有纠正的错误，爱尔兰的两个基恩不是兄弟）。好球，这个球传给10号传得非常好。<br />—咦，10号怎么也叫夏普。可能是这样的，外国球员印在球衣上的只是姓，这些球员都姓夏普，就像韩国有很多球员都姓朴。漂亮，<br />—10号连过两名队员，破门得分，11号上前祝贺，11号是–夏普(停顿好大一会）对不起，观众朋友，夏普是印在球衣上赞助商的名字。</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Cindy</div>
<div class='content'>
Hi,I just come to the US and can login this blog freely.shuanging</div>
</div>
<div class='comment'>
<div class='author'>Anonymous</div>
<div class='content'>
顶一个。。。。。好吧我只是想说我翻墙成功了。。。。终于可以上Facebook了。。。。。。<br />这届世界杯。。。刘建宏火了。。。。。<br />就是这样<br />Echo</div>
</div>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/06/associative-container/">Associative Container</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-06T00:00:00-05:00" pubdate data-updated="true">Jul 6<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
pair类型，以及更为典型的map类型。既具有vector类型可以纵向联系某种特定数据类型的特点，又可以把两种不同数据类型但在应用中意义相关的数据横向联系起来。这种联系可以理解为“映射”，每个key和唯一的另一个数据类型存放地址相关。另一种理解方法，key值可以视为对应于其值value的一个指针或者是迭代器，只是这样的对应始终是一对一的。此外，map类型默认如果所查询的key值不存在，则自动添加到队尾，默认赋值0。这个特点很适合计数使用。<br /><br />但在单纯进行查找操作的时候则需要小心。若要仅仅确定某个key是否存在，可以使用m.count(k)，返回值为0或1。若要确定某个key值的具体位置，则可使用m.find(k)，若k键存在，则返回的是指向它的一个迭代器，若不存在，则返回指向超出队尾位置的迭代器，这个返回值和m.end()的返回值一致。<br /><br />//count number of times each word occurs in the input<br />map<string, int=""> word_count</string,><br />string word;<br />while(cin &gt;&gt; word){<br />&nbsp;&nbsp; &nbsp;++word_count[word]; &nbsp; }<br /><br />//equal funtion with .insert<br />&#8230;&#8230;<br />while(cin &gt;&gt; word){<br />&nbsp;&nbsp; &nbsp;//insert element with key equal to word and value 1<br />&nbsp;&nbsp; &nbsp;//if word already in word_count, insert does nothing<br />&nbsp;&nbsp; &nbsp;pair<map><string, int="">::iterator, bool&gt; ret =</string,></map><br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;word_count.insert(make_pair(word, 1));<br />&nbsp;&nbsp; &nbsp;if (!ret.second) &nbsp; //word already in word_count<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;++ret.first-&gt;second; &nbsp; //increment counter<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;//which is equal to ++((ret.first)-&gt;second);<br />}<br /><br />这里有一点需要注意的，仍然是不同符号连用时优先级的问题。之前在c.lang组里面也遇到了这样的问题，简单的一段程序都会出现匪夷所思的结果。那么，得到的启发就是，在任何情况下，多写几层括号，既可以方便之后的阅读代码，又可以避免因为默认优先级而引起难以察觉的问题。<br /><br />ps. 设计程序的一个良好习惯是首先将程序需要完成的任务明确成条目，然后列出涉及的操作，明确了这些需要提供的操作，有助于建立需要的数据结构和实现这些行为。一般的顺序是，明确输入输出参量以及将其相关联起来的数据的结构&#8211;&gt;明确程序行为-&gt;根据数据结构设计类-&gt;设计主函数-&gt;设计输出函数&#8211;&gt;设计成员函数。<br /><br />pps. 一篇介绍C++的文章(<a href="http://blog.csdn.net/pongba/archive/2007/09/14/1785372.aspx">为什么C++</a>)</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/05/install-click-in-ubuntu-1004/">Install Click in Ubuntu 10.04</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-05T00:00:00-05:00" pubdate data-updated="true">Jul 5<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
GIT is the best way to acquire the code, so it is necessary to install this software first. Besides, there are several packages needed to patch before the click installs. And it is also tricky for the final step of installation.<br /><br />**************<br /><br /># git clone git://git.kernel.org/pub/scm/git/git.git<br /><br /># apt-get install git-core<br /><br /># git clone git://read.cs.ucla.edu/git/click<br /><br /># apt-get install autoconf<br /><br /># apt-get install libgtk2.0-dev<br /><br /># apt-get install libtool<br /><br />To update to the latest version checked in to the public repository, change into your working copy directory DIR and run:<br /><br /># git pull<br /><br />To fetch the Click packages:<br /><br /># git clone git://read.cs.ucla.edu/git/click-packages DIR<br /><br />Installation of Click:<br /><br /># cd CLICKDIR<br /># ./configure &#8211;prefix=$HOME &#8211;enable-analysis &#8211;enable-test<br /># make install<br /><br />The –prefix=$HOME configuration switch causes Click to install into your home directory. To run the Click driver and read its manual pages, you&#8217;ll need to add $HOME/bin and $HOME/man&nbsp; to your PATH and MANPATH environment variables, respectively. Alternatively, if you have root privilege on your machine, you can install Click in /usr/local, /usr/local/click, or wherever you&#8217;d like.<br /><br />The –enable-analysis and –enable-test configuration switches turn on support for two necessary sub-packages, including trace analysis and regression test elements.<br /><br />If you get a bus error when running Click on a Solaris or other non-x86 machine, try running your conﬁguration through click-align: “click-align config.click | click”. <br /><br />Furthermore, make sure your system has the necessary libraries and packages<br />installed.&nbsp; On a Debian or Ubuntu system, this will include automake,<br />autoconf, libtool, libgtk2.0-dev (or libgtk2-dev), and graphviz.&nbsp; Then:<br /><br /># cd CLICKDIR/apps/clicky<br /># autoreconf -i<br /># ./configure [&#8211;prefix=PREFIX] &#8211;with-click=CLICKPREFIX<br /># make install<br /><br />That&#8217;s done:)<br /><br />But on the other hand, there are some warning coming out, although they seem to be all right till now.<br /><br />FIRST &amp; SECOND appear in the Click Configuration step.<br /><br />Your Linux kernel header files cause errors when included by a C++ program,<br />so I won&#8217;t try to compile the linuxmodule driver.<br /><br />There are two common reasons for this error:<br />1. You have not applied the Linux kernel patch that comes with this distribution.&nbsp; Apply the right patch and try again.&nbsp; See the INSTALL file for more information.<br />2. Your Linux configuration enables some functionality that is not yet covered by our patches.&nbsp; Turn off this functionality and try again, or fix the error and tell us how you did it.&nbsp; See the config.log file for more detailed information on the error.<br /><br />==============<br /><br />WARNING: `makeinfo&#8217; is missing on your system.&nbsp; You should only need it if you modified a `.texi&#8217; or `.texinfo&#8217; file, or any other file indirectly affecting the aspect of the manual.&nbsp; The spurious call might also be the consequence of using a buggy `make&#8217; (AIX, DU, IRIX).&nbsp; You might want to install the `Texinfo&#8217; package or the `GNU make&#8217; package.&nbsp; Grab either from any GNU archive site.<br /><br />=============<br /><br />The THIRD comes out when I build the Click install.<br /><br />click-elem2man: warning: category &#8216;devices&#8217; begins with a lowercase letter (used in UMLSwitch)<br />click-elem2man: warning: category &#8216;devices&#8217; begins with a lowercase letter (used in UMLSwitch)<br />../missing makeinfo ./click.texi<br />WARNING: `makeinfo&#8217; is missing on your system.&nbsp; You should only need it if<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; you modified a `.texi&#8217; or `.texinfo&#8217; file, or any other file<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; indirectly affecting the aspect of the manual.&nbsp; The spurious<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; call might also be the consequence of using a buggy `make&#8217; (AIX,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DU, IRIX).&nbsp; You might want to install the `Texinfo&#8217; package or<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; the `GNU make&#8217; package.&nbsp; Grab either from any GNU archive site.<br />make[1]: [click.info] Error 1 (ignored)<br />&#8230;&#8230;<br />install-info: warning: don&#8217;t call programs like install-info with an absolute path,<br />install-info: warning: /usr/sbin/install-info provided by dpkg is deprecated and will go away soon;<br />install-info: warning: its replacement lives in /usr/bin/.<br />This is not dpkg install-info anymore, but GNU install-info<br />See the man page for ginstall-info for command line arguments<br />install-info: No such file or directory for /root/share/info/click.info<br />make[1]: [install-info] Error 1 (ignored)<br /><br />=============<br /><br />The FINAL one appears when I build the clicky.<br /><br />xcallbacks.c: In function ‘on_cut1_activate’:<br />xcallbacks.c:11: warning: unused parameter ‘menuitem’<br />xcallbacks.c:12: warning: unused parameter ‘user_data’<br />xcallbacks.c: In function ‘on_copy1_activate’:<br />xcallbacks.c:19: warning: unused parameter ‘menuitem’<br />xcallbacks.c:20: warning: unused parameter ‘user_data’<br />xcallbacks.c: In function ‘on_paste1_activate’:<br />xcallbacks.c:27: warning: unused parameter ‘menuitem’<br />xcallbacks.c:28: warning: unused parameter ‘user_data’<br />xcallbacks.c: In function ‘on_clear1_activate’:<br />xcallbacks.c:35: warning: unused parameter ‘menuitem’<br />xcallbacks.c:36: warning: unused parameter ‘user_data’<br />xcallbacks.c: In function ‘on_properties1_activate’:<br />xcallbacks.c:43: warning: unused parameter ‘menuitem’<br />xcallbacks.c:44: warning: unused parameter ‘user_data’<br />xcallbacks.c: In function ‘on_preferences1_activate’:<br />xcallbacks.c:51: warning: unused parameter ‘menuitem’<br />xcallbacks.c:52: warning: unused parameter ‘user_data’<br />xcallbacks.c: In function ‘on_about1_activate’:<br />xcallbacks.c:59: warning: unused parameter ‘menuitem’<br />xcallbacks.c:60: warning: unused parameter ‘user_data’</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/02/install-wireshark-madwifi-and-rt2870/">Install Madwifi in UBUNTU 10.04</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-02T00:00:00-05:00" pubdate data-updated="true">Jul 2<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
When I install the madwifi driver from madwifi.org, the problem appears:<br /><blockquote><br /><pre><code>In file included from /home/user/madwifi/madwifi-hal-0.10.5.6/ath/../net80211/ieee80211_monitor.h:34,<br />from /home/user/madwifi/madwifi-hal-0.10.5.6/ath/if_ath.c:75:<br />/home/user/madwifi/madwifi-hal-0.10.5.6/ath/../ath/if_athvar.h:107: error: conflicting types for 'irqreturn_t'<br />include/linux/irqreturn.h:16: note: previous declaration of 'irqreturn_t' was here<br />/home/user/madwifi/madwifi-hal-0.10.5.6/ath/if_ath.c: In function 'ath_attach':<br />/home/user/madwifi/madwifi-hal-0.10.5.6/ath/if_ath.c:478: error: 'struct net_device' has no member named 'priv'<br />/home/user/madwifi/madwifi-hal-0.10.5.6/ath/if_ath.c:819: error: 'struct net_device' has no member named 'open'<br />/home/user/madwifi/madwifi-hal-0.10.5.6/ath/if_ath.c:820: error: 'struct net_device' has no member named 'stop'<br />/home/user/madwifi/madwifi-hal-0.10.5.6/ath/if_ath.c:821: error: 'struct net_device' has no member named 'hard_start_xmit'<br />/home/user/madwifi/madwifi-hal-0.10.5.6/ath/if_ath.c:822: error: 'struct net_device' has no member named 'tx_timeout'<br />.....<br />.....<br />.....<br />make[3]: *** [/home/user/madwifi/madwifi-hal-0.10.5.6/ath/if_ath.o] Error 1<br />make[2]: *** [/home/user/madwifi/madwifi-hal-0.10.5.6/ath] Error 2<br />make[1]: *** [_module_/home/user/madwifi/madwifi-hal-0.10.5.6] Error 2<br />make[1]: Leaving directory `/usr/src/linux-headers-2.6.31-14-generic'<br />make: *** [modules] Error 2</code></pre></blockquote>This is due to the fact that there was a change in the kernel headers. The new kernels replaced the old net_device structure with a new one called net_device_ops. It looks like this change exists since kernel 2.6.29 and up.<br /><br />There currently is no stable release of the madwifi drivers for the new kernerls. But the madwifi project&#8217;s latest trunk compiles and works fine (at least for me) and I have not noticed any issues yet. This should work with any Linux distribution with a kernel of 2.6.29 and above. To find out your kernel version run:<br /><blockquote>$uname -r</blockquote>Here is how to get and install it:<br /><br />1. You can either get the latest trunk from the madwifi website at <a href="http://snapshots.madwifi-project.org/madwifi-trunk-current.tar.gz">here</a> or use the one that worked for me (<a href="http://dimitar.me/wp-content/uploads/2009/10/madwifi-trunk-r4099-20090929.tar.gz">click</a>).<br /><br />2. Download and uncompress the files, cd to the directory containing the file. Then gunzip and untar the files:<br /><blockquote>tar -xvzf madwifi-trunk-r4099-20090929.tar.gz</blockquote>3. Cd into the newly created directory and install the drivers. Firstly, make sure you have the kernel headers:<br /><blockquote>sudo apt-get install build-essential</blockquote>Then compile and install:<br /><blockquote>sudo make<br />sudo make install</blockquote>4. Add the ath_pci module to the kernel. You need to add a line to the end of the /etc/modules file. The line should read: ath_pci. You can do this with vi of course, but if you don&#8217;t know the vi editor then it would be much easier to use gedit. So, do:<br /><blockquote>sudo gedit /etc/modules</blockquote>Add ath_pci to the end of the file. Here is how my file looks:<br /><blockquote><pre><code># /etc/modules: kernel modules to load at boot time.<br />#<br /># This file contains the names of kernel modules that should be loaded<br /># at boot time, one per line. Lines beginning with "#" are ignored.<br /><br />lp<br />sbp2<br />ath_pci</code></pre></blockquote>At this point you can reboot and you should have wireless. You could save yourself a reboot by modprobing the kernel with the ath_pci module like this:<br /><blockquote>sudo modprobe ath_pci</blockquote>That&#8217;s done:)</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/02/install-rt2870-usb-wireless-adapter-in/">Install RT2870 Usb Wireless Adapter in Ubuntu 10</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-02T00:00:00-05:00" pubdate data-updated="true">Jul 2<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Step 0 : At terminal, aaa@ubuntu:~$ sudo gedit /etc/modprobe.d/blacklist.conf. Add “blacklist rt2870usb” without quote at the end of the file, then save it.<br /><br />Step 1 : Download the latest rt2870 driver (<a href="http://www.ralinktech.com/support.php?s=2">here</a>) from Ralink.<br /><br />Step 2 : Untar the file and save to your home folder, and name it. (eg. the folder name is rt2870)<br /><br />Step 2.51 : According to the instruction I found in the internet, there should be another three steps done with the dongle: firstly, without plug your wireless usb at this moment, at terminal aaa@ubuntu:~$ type lsusb.<br /><br />Step 2.52 : Then plug in the wireless usb to the computer, type lsusb again, the&nbsp;wireless usb ID (8 digits)&nbsp;will be found. Write it down.<br /><br />Step 2.53 : Check it at aaa@ubuntu:~/rt2870/os/linux$, sudo gedit usb_main_dev.c. If the usb device is not included, add the wireless usb ID. Save the file. For example, the additional two lines are:<br />{USB_DEVICE(0x0B05,0x1761)}, /* Asus */<br />{USB_DEVICE(0x1761,0x0B05)}, /* Asus */<br /><br />Step 3 :&nbsp;In Makefile,&nbsp;set the &#8220;MODE = STA&#8221; in Makefile and chose the TARGET to Linux by set &#8220;TARGET = LINUX&#8221;. Then, change the directory of RT28XX_DIR in line 7 by &#8220;aaa@ubuntu:~$&nbsp;shell pwd&#8221;. Finally, via the command &#8220;aaa@ubuntu:~$&nbsp;shell uname -r&#8221;,&nbsp;define the linux kernel source include file path LINUX_SRC&nbsp;modify to meet your need.<br /><br />Step 4 : At same terminal , sudo gedit config.mk, and change two settings.<br /># Support Wpa_Supplicant<br />HAS_WPA_SUPPLICANT=n → y<br /># Support Native WpaSupplicant for Network Maganger<br />HAS_NATIVE_WPA_SUPPLICANT_SUPPORT=n → y<br /><br />Step 5 : At aaa@ubuntu:~/rt2870$, sudo gedit Makefile, check the folllowing at the top of the file:<br />RT28xx_MODE = STA<br />TARGET = LINUX<br />CHIPSET = 2870<br />If ok, close the file. If not, change the setting as above.<br /><br />Step 6: rt2870 2.2.00 version do not support kernel 2.6.31-14-generic, so you have to do a patch. The download link is <a href="http://launchpadlibrarian.net/35348337/rt2870-2.6.31.patch">here</a>, and the patch is via &#8220;patch -p1 &lt; rt2870-2.6.31.patch&#8221;.If you get a message of unable to patch, then download and install Patch_2.5.9-5_amd64.deb.<br /><br />Step 7 : At aaa@ubuntu:~/rt2870$, do the compilation.<br />sudo make uninstall<br />sudo make clean<br />sudo make<br />sudo make install<br /><br />Step 8 : At aaa@ubuntu:~$ sudo modprobe rt2870sta<br /><br />Step 9 : At aaa@ubuntu”~$ sudo gedit /etc/rc.local, add following two lines prior to exit0.<br />ifconfig ra0 up<br />pkill NetworkManager<br />save it, then at same terminal, sudo gedit /etc/modules, add rt2870sta, then save the file.<br /><br />Step 10 :At aaa@ubuntu:~$ ifconfig or iwconfig, you will see your wireless is up as ra0 or wlan0.<br /><br />Step 11 : Now configure networkmanager, use wep instead of wpa-psk or wpa2-psk. Your wireless will be able to connect to the internet. If there&#8217;s no connection, then do step 12.<br /><br />Step 12 : Update networkmanager. Go to System – Software Sources – Other software, add the following line<br />deb http://ppa.launchpad.net/network-manager/trunk/ubuntu karmic main<br /><br />That&#8217;s the end.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/01/20100701-digest-container/">Digest: Container</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-01T00:00:00-05:00" pubdate data-updated="true">Jul 1<span>st</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
将一个容器复制给另一个容器时，类型必须匹配：容器类型和元素类型都必须一致。<br /><br />迭代器first和last如果满足以下两点，则可以形成一个迭代器范围：1、它们指向同一个容器中的元素或超出末端的下一个位置；如果两个迭代器不相等，则对first反复应用自增加运算必须能够到达last，即，务必在使用前检查last绝对不能位于first之前。<br /><br />使用迭代器时，通常可以编写程序使得要求迭代器有效的代码范围较短。然后，在该范围内，严格检查每一条语句，判断是否有元素增加或者删除，从而相应的调整迭代器的值。此外，任何insert、push、assign操作都会导致原迭代器失效。当编写循环将元素插入到vector或deque容器中时，程序必须确保迭代器在每次循环后都得到更新。<br />vector&#8221;int&#8221;<int>::iterator first = v.begin(); //cache begin iterator<br />//safer: recalaulate end on each trip whenever the loop adds/erases elements<br />while (first != v.end()) { &nbsp;//do some processing in block&#8230;<br />&nbsp;&nbsp; &nbsp; //insert new value, meanwhile update the first iterator<br />&nbsp;&nbsp; &nbsp; first = v.insert(first, 42);<br />&nbsp;&nbsp; &nbsp; ++first; &nbsp; &nbsp;//advance first just past the element added just now<br />&nbsp;&nbsp; &nbsp; } &nbsp; &nbsp;//example ends<br />&nbsp;&nbsp; <br />在调用front或back函数之前，或者在对begin或end返回的迭代器进行解引用运算之前，必须保证容器非空。例如，进行 if(!ilist.empty()){&#8230;}的检查，否则，上述四个语句的操作都是没有定义的。</int><br /><br /><int></int>如果程序要求随机访问元素，则应使用vector或deque容器；如果程序必须在容器中间位置插入或者删除元素，则应采用list容器。如果无法确定某种应用应当采取哪种容器，则编写代码时应尝试只使用vector和list容器都提供的操作：使用迭代器，而不是下表，并且避免随机访问元素。这样编写代码，在必要的时候，可以很方便将程序从使用vector修改为使用list容器。</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/30/complangc-is-good-place/">comp.lang.c Is a Good Place:)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-30T00:00:00-05:00" pubdate data-updated="true">Jun 30<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Q: I&#8217;m trying to define a few simple little function-like macros such as<br /><span class="Apple-tab-span" style="white-space: pre;">      </span>#define square(x) x * x<br />but they&#8217;re not always working.<br />&#8212;&#8212;&#8212;-<br />A: <b>There are three important rules to remember when defining function-like macros</b>:<br />The macro expansion must always be parenthesized to protect any lower-precedence operators from the surrounding expression. Given the (incorrect) square() macro above, the invocation<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>1 / square(n)<br />would expand to<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>1 / n * n<br />(which evaluates as (1 / n) * n), while what you want is<br /><span class="Apple-tab-span" style="white-space: pre;">       </span>1 / (n * n)<br />(In this case, the problem is one of associativity rather than precedence, but the effect is the same.)<br />Within the macro definition, all occurrences of the parameters must be parenthesized to protect any low-precedence operators in the actual arguments from the rest of the macro expansion. Again given the square() macro above, the invocation<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>square(n + 1)<br /><span class="Apple-tab-span" style="white-space: pre;"></span><br />would expand to<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>n + 1 * n + 1<br /><span class="Apple-tab-span" style="white-space: pre;"></span><br />But what you want is<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>(n + 1) * (n + 1)<br /><span class="Apple-tab-span" style="white-space: pre;"></span><br />If a parameter appears several times in the expansion, the macro may not work properly if the actual argument is an expression with side effects. Yet again given the square() macro above, the invocation<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>square(i++)<br />would expand to<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>i++ * i++<br />which is undefined (see question 3.2).<br />The proper definition of a square macro, to comply with rules 1 and 2 above, is<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>#define square(x) ((x) * (x))<br /><span class="Apple-tab-span" style="white-space: pre;"></span><br />Complying with rule 3 is harder. Sometimes, careful exploitation of the short-circuiting behavior of the &amp;&amp;, ||, or ?: operators (see question 3.6) can arrange that a parameter which appears several times is guaranteed to be evaluated exactly once. Sometimes, the macro is just documented as being unsafe, and callers must remember not to use it on arguments with side effects. Other times, it may be advisable not to compose a function-like macro if it can&#8217;t be made safe.<br />(As a stylistic convention, macros are often defined with capitalized or all-upper-case names, to make it obvious that they are macros. It may be acceptable to define a function-like macro with an all-lower-case name, if it truly simulates a function, but only if it complies with all three rules above. Since the squaring macro we&#8217;ve been discussing does not, it should be defined as something like<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>#define Square(x) ((x) * (x))<span class="Apple-tab-span" style="white-space: pre;"> </span>/* UNSAFE */<br />if it is to be used at all.)<br /><br />References: K&amp;R1 Sec. 4.11 p. 87<br />K&amp;R2 Sec. 4.11.2 p. 90<br />H&amp;S Secs. 3.3.6,3.3.7 pp. 49-50<br />CT&amp;P Sec. 6.2 pp. 78-80<br /><a href="http://groups.google.com/group/comp.lang.c/browse_thread/thread/57175d098e52a10d?hl=en">original question</a></div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/13/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/11/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/05/15/reading-note-of-sicp-5/">Reading note of SICP (5)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/14/kinetic-chain-of-reactions/">Kinetic Chain of Reactions</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/12/thought-process-in-a-tennis-match/">Thought Process in a Tennis Match</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/05/survive-on-busy-two-weeks/">Survive on Busy Two weeks</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/01/strategic-playing-for-the-first-several-sets/">Strategic Playing for the First Several Sets</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  <a href="https://github.com/creasyw">Qiong Wu</a> &copy;2009-2014 &mdash;
  <span class="credit">Thanks to <a href="http://ayyang.com">Alex Yang</a>, <a href="http://octopress.org/">Octopress</a> and <a href="https://github.com/">Github</a>.</span><br>
  send me an email 
<script type="text/javascript">
var emailriddlerarray=[99,114,101,97,115,121,119,117,113,105,111,110,103,64,103,109,97,105,108,46,99,111,109]
var encryptedemail_id82='' //variable to contain encrypted email 
for (var i=0; i<emailriddlerarray.length; i++)
 encryptedemail_id82+=String.fromCharCode(emailriddlerarray[i])
 document.write('<a href="mailto:'+encryptedemail_id82+'"><img src="/img/email.png" alt="Qiong" /></a>')
</script>
</p>
</footer>
</body>
</html>
