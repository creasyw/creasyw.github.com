
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Qiong Wu</title>
  <meta name="author" content="Qiong Wu">

  
  <meta name="description" content="pair类型，以及更为典型的map类型。既具有vector类型可以纵向联系某种特定数据类型的特点，又可以把两种不同数据类型但在应用中意义相关的数据横向联系起来。这种联系可以理解为“映射”，每个key和唯一的另一个数据类型存放地址相关。另一种理解方法， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://creasyw.github.io/blog/page/13/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <!-- add Mathjex.js by qiong -->
  <script src="http://kramdown.rubyforge.org/MathJax/MathJax.js" type="text/javascript"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="./atom.xml" rel="alternate" title="Qiong Wu" type="application/atom+xml">
  
  <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  
  
  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Qiong Wu</a></h1>
  <!--
  
    <h2>A blogging framework for hackers.</h2>
  
  -->
</hgroup>
</header>
  <nav role="navigation"><!--
<ul class="subscription" data-subscription="rss">
  <li><a href="./atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:creasyw.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

-->

<ul class="main-navigation">
  <!--<li><a class="yellow" href="/">Hello</a></li>-->
  <li><a class="github" href="/blog/archives/">Blog</a></li>
  <li><a class="github" href="/tags">Tags</a></li>
  <li><a class="github" href="http://www.github.com/creasyw">Github</a></li>
  <li><a class="github" href="https://twitter.com/creasywuqiong">Twitter</a></li>
  <li><a class="github" href="/rss">RSS</a></li>
</ul>


</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/06/associative-container/">Associative Container</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-06T00:00:00-05:00" pubdate data-updated="true">Jul 6<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
pair类型，以及更为典型的map类型。既具有vector类型可以纵向联系某种特定数据类型的特点，又可以把两种不同数据类型但在应用中意义相关的数据横向联系起来。这种联系可以理解为“映射”，每个key和唯一的另一个数据类型存放地址相关。另一种理解方法，key值可以视为对应于其值value的一个指针或者是迭代器，只是这样的对应始终是一对一的。此外，map类型默认如果所查询的key值不存在，则自动添加到队尾，默认赋值0。这个特点很适合计数使用。<br /><br />但在单纯进行查找操作的时候则需要小心。若要仅仅确定某个key是否存在，可以使用m.count(k)，返回值为0或1。若要确定某个key值的具体位置，则可使用m.find(k)，若k键存在，则返回的是指向它的一个迭代器，若不存在，则返回指向超出队尾位置的迭代器，这个返回值和m.end()的返回值一致。<br /><br />//count number of times each word occurs in the input<br />map<string, int=""> word_count</string,><br />string word;<br />while(cin &gt;&gt; word){<br />&nbsp;&nbsp; &nbsp;++word_count[word]; &nbsp; }<br /><br />//equal funtion with .insert<br />&#8230;&#8230;<br />while(cin &gt;&gt; word){<br />&nbsp;&nbsp; &nbsp;//insert element with key equal to word and value 1<br />&nbsp;&nbsp; &nbsp;//if word already in word_count, insert does nothing<br />&nbsp;&nbsp; &nbsp;pair<map><string, int="">::iterator, bool&gt; ret =</string,></map><br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;word_count.insert(make_pair(word, 1));<br />&nbsp;&nbsp; &nbsp;if (!ret.second) &nbsp; //word already in word_count<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;++ret.first-&gt;second; &nbsp; //increment counter<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;//which is equal to ++((ret.first)-&gt;second);<br />}<br /><br />这里有一点需要注意的，仍然是不同符号连用时优先级的问题。之前在c.lang组里面也遇到了这样的问题，简单的一段程序都会出现匪夷所思的结果。那么，得到的启发就是，在任何情况下，多写几层括号，既可以方便之后的阅读代码，又可以避免因为默认优先级而引起难以察觉的问题。<br /><br />ps. 设计程序的一个良好习惯是首先将程序需要完成的任务明确成条目，然后列出涉及的操作，明确了这些需要提供的操作，有助于建立需要的数据结构和实现这些行为。一般的顺序是，明确输入输出参量以及将其相关联起来的数据的结构&#8211;&gt;明确程序行为-&gt;根据数据结构设计类-&gt;设计主函数-&gt;设计输出函数&#8211;&gt;设计成员函数。<br /><br />pps. 一篇介绍C++的文章(<a href="http://blog.csdn.net/pongba/archive/2007/09/14/1785372.aspx">为什么C++</a>)</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/05/install-click-in-ubuntu-1004/">Install Click in Ubuntu 10.04</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-05T00:00:00-05:00" pubdate data-updated="true">Jul 5<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
GIT is the best way to acquire the code, so it is necessary to install this software first. Besides, there are several packages needed to patch before the click installs. And it is also tricky for the final step of installation.<br /><br />**************<br /><br /># git clone git://git.kernel.org/pub/scm/git/git.git<br /><br /># apt-get install git-core<br /><br /># git clone git://read.cs.ucla.edu/git/click<br /><br /># apt-get install autoconf<br /><br /># apt-get install libgtk2.0-dev<br /><br /># apt-get install libtool<br /><br />To update to the latest version checked in to the public repository, change into your working copy directory DIR and run:<br /><br /># git pull<br /><br />To fetch the Click packages:<br /><br /># git clone git://read.cs.ucla.edu/git/click-packages DIR<br /><br />Installation of Click:<br /><br /># cd CLICKDIR<br /># ./configure &#8211;prefix=$HOME &#8211;enable-analysis &#8211;enable-test<br /># make install<br /><br />The –prefix=$HOME configuration switch causes Click to install into your home directory. To run the Click driver and read its manual pages, you&#8217;ll need to add $HOME/bin and $HOME/man&nbsp; to your PATH and MANPATH environment variables, respectively. Alternatively, if you have root privilege on your machine, you can install Click in /usr/local, /usr/local/click, or wherever you&#8217;d like.<br /><br />The –enable-analysis and –enable-test configuration switches turn on support for two necessary sub-packages, including trace analysis and regression test elements.<br /><br />If you get a bus error when running Click on a Solaris or other non-x86 machine, try running your conﬁguration through click-align: “click-align config.click | click”. <br /><br />Furthermore, make sure your system has the necessary libraries and packages<br />installed.&nbsp; On a Debian or Ubuntu system, this will include automake,<br />autoconf, libtool, libgtk2.0-dev (or libgtk2-dev), and graphviz.&nbsp; Then:<br /><br /># cd CLICKDIR/apps/clicky<br /># autoreconf -i<br /># ./configure [&#8211;prefix=PREFIX] &#8211;with-click=CLICKPREFIX<br /># make install<br /><br />That&#8217;s done:)<br /><br />But on the other hand, there are some warning coming out, although they seem to be all right till now.<br /><br />FIRST &amp; SECOND appear in the Click Configuration step.<br /><br />Your Linux kernel header files cause errors when included by a C++ program,<br />so I won&#8217;t try to compile the linuxmodule driver.<br /><br />There are two common reasons for this error:<br />1. You have not applied the Linux kernel patch that comes with this distribution.&nbsp; Apply the right patch and try again.&nbsp; See the INSTALL file for more information.<br />2. Your Linux configuration enables some functionality that is not yet covered by our patches.&nbsp; Turn off this functionality and try again, or fix the error and tell us how you did it.&nbsp; See the config.log file for more detailed information on the error.<br /><br />==============<br /><br />WARNING: `makeinfo&#8217; is missing on your system.&nbsp; You should only need it if you modified a `.texi&#8217; or `.texinfo&#8217; file, or any other file indirectly affecting the aspect of the manual.&nbsp; The spurious call might also be the consequence of using a buggy `make&#8217; (AIX, DU, IRIX).&nbsp; You might want to install the `Texinfo&#8217; package or the `GNU make&#8217; package.&nbsp; Grab either from any GNU archive site.<br /><br />=============<br /><br />The THIRD comes out when I build the Click install.<br /><br />click-elem2man: warning: category &#8216;devices&#8217; begins with a lowercase letter (used in UMLSwitch)<br />click-elem2man: warning: category &#8216;devices&#8217; begins with a lowercase letter (used in UMLSwitch)<br />../missing makeinfo ./click.texi<br />WARNING: `makeinfo&#8217; is missing on your system.&nbsp; You should only need it if<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; you modified a `.texi&#8217; or `.texinfo&#8217; file, or any other file<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; indirectly affecting the aspect of the manual.&nbsp; The spurious<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; call might also be the consequence of using a buggy `make&#8217; (AIX,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DU, IRIX).&nbsp; You might want to install the `Texinfo&#8217; package or<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; the `GNU make&#8217; package.&nbsp; Grab either from any GNU archive site.<br />make[1]: [click.info] Error 1 (ignored)<br />&#8230;&#8230;<br />install-info: warning: don&#8217;t call programs like install-info with an absolute path,<br />install-info: warning: /usr/sbin/install-info provided by dpkg is deprecated and will go away soon;<br />install-info: warning: its replacement lives in /usr/bin/.<br />This is not dpkg install-info anymore, but GNU install-info<br />See the man page for ginstall-info for command line arguments<br />install-info: No such file or directory for /root/share/info/click.info<br />make[1]: [install-info] Error 1 (ignored)<br /><br />=============<br /><br />The FINAL one appears when I build the clicky.<br /><br />xcallbacks.c: In function ‘on_cut1_activate’:<br />xcallbacks.c:11: warning: unused parameter ‘menuitem’<br />xcallbacks.c:12: warning: unused parameter ‘user_data’<br />xcallbacks.c: In function ‘on_copy1_activate’:<br />xcallbacks.c:19: warning: unused parameter ‘menuitem’<br />xcallbacks.c:20: warning: unused parameter ‘user_data’<br />xcallbacks.c: In function ‘on_paste1_activate’:<br />xcallbacks.c:27: warning: unused parameter ‘menuitem’<br />xcallbacks.c:28: warning: unused parameter ‘user_data’<br />xcallbacks.c: In function ‘on_clear1_activate’:<br />xcallbacks.c:35: warning: unused parameter ‘menuitem’<br />xcallbacks.c:36: warning: unused parameter ‘user_data’<br />xcallbacks.c: In function ‘on_properties1_activate’:<br />xcallbacks.c:43: warning: unused parameter ‘menuitem’<br />xcallbacks.c:44: warning: unused parameter ‘user_data’<br />xcallbacks.c: In function ‘on_preferences1_activate’:<br />xcallbacks.c:51: warning: unused parameter ‘menuitem’<br />xcallbacks.c:52: warning: unused parameter ‘user_data’<br />xcallbacks.c: In function ‘on_about1_activate’:<br />xcallbacks.c:59: warning: unused parameter ‘menuitem’<br />xcallbacks.c:60: warning: unused parameter ‘user_data’</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/02/install-wireshark-madwifi-and-rt2870/">Install Madwifi in UBUNTU 10.04</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-02T00:00:00-05:00" pubdate data-updated="true">Jul 2<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
When I install the madwifi driver from madwifi.org, the problem appears:<br /><blockquote><br /><pre><code>In file included from /home/user/madwifi/madwifi-hal-0.10.5.6/ath/../net80211/ieee80211_monitor.h:34,<br />from /home/user/madwifi/madwifi-hal-0.10.5.6/ath/if_ath.c:75:<br />/home/user/madwifi/madwifi-hal-0.10.5.6/ath/../ath/if_athvar.h:107: error: conflicting types for 'irqreturn_t'<br />include/linux/irqreturn.h:16: note: previous declaration of 'irqreturn_t' was here<br />/home/user/madwifi/madwifi-hal-0.10.5.6/ath/if_ath.c: In function 'ath_attach':<br />/home/user/madwifi/madwifi-hal-0.10.5.6/ath/if_ath.c:478: error: 'struct net_device' has no member named 'priv'<br />/home/user/madwifi/madwifi-hal-0.10.5.6/ath/if_ath.c:819: error: 'struct net_device' has no member named 'open'<br />/home/user/madwifi/madwifi-hal-0.10.5.6/ath/if_ath.c:820: error: 'struct net_device' has no member named 'stop'<br />/home/user/madwifi/madwifi-hal-0.10.5.6/ath/if_ath.c:821: error: 'struct net_device' has no member named 'hard_start_xmit'<br />/home/user/madwifi/madwifi-hal-0.10.5.6/ath/if_ath.c:822: error: 'struct net_device' has no member named 'tx_timeout'<br />.....<br />.....<br />.....<br />make[3]: *** [/home/user/madwifi/madwifi-hal-0.10.5.6/ath/if_ath.o] Error 1<br />make[2]: *** [/home/user/madwifi/madwifi-hal-0.10.5.6/ath] Error 2<br />make[1]: *** [_module_/home/user/madwifi/madwifi-hal-0.10.5.6] Error 2<br />make[1]: Leaving directory `/usr/src/linux-headers-2.6.31-14-generic'<br />make: *** [modules] Error 2</code></pre></blockquote>This is due to the fact that there was a change in the kernel headers. The new kernels replaced the old net_device structure with a new one called net_device_ops. It looks like this change exists since kernel 2.6.29 and up.<br /><br />There currently is no stable release of the madwifi drivers for the new kernerls. But the madwifi project&#8217;s latest trunk compiles and works fine (at least for me) and I have not noticed any issues yet. This should work with any Linux distribution with a kernel of 2.6.29 and above. To find out your kernel version run:<br /><blockquote>$uname -r</blockquote>Here is how to get and install it:<br /><br />1. You can either get the latest trunk from the madwifi website at <a href="http://snapshots.madwifi-project.org/madwifi-trunk-current.tar.gz">here</a> or use the one that worked for me (<a href="http://dimitar.me/wp-content/uploads/2009/10/madwifi-trunk-r4099-20090929.tar.gz">click</a>).<br /><br />2. Download and uncompress the files, cd to the directory containing the file. Then gunzip and untar the files:<br /><blockquote>tar -xvzf madwifi-trunk-r4099-20090929.tar.gz</blockquote>3. Cd into the newly created directory and install the drivers. Firstly, make sure you have the kernel headers:<br /><blockquote>sudo apt-get install build-essential</blockquote>Then compile and install:<br /><blockquote>sudo make<br />sudo make install</blockquote>4. Add the ath_pci module to the kernel. You need to add a line to the end of the /etc/modules file. The line should read: ath_pci. You can do this with vi of course, but if you don&#8217;t know the vi editor then it would be much easier to use gedit. So, do:<br /><blockquote>sudo gedit /etc/modules</blockquote>Add ath_pci to the end of the file. Here is how my file looks:<br /><blockquote><pre><code># /etc/modules: kernel modules to load at boot time.<br />#<br /># This file contains the names of kernel modules that should be loaded<br /># at boot time, one per line. Lines beginning with "#" are ignored.<br /><br />lp<br />sbp2<br />ath_pci</code></pre></blockquote>At this point you can reboot and you should have wireless. You could save yourself a reboot by modprobing the kernel with the ath_pci module like this:<br /><blockquote>sudo modprobe ath_pci</blockquote>That&#8217;s done:)</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/02/install-rt2870-usb-wireless-adapter-in/">Install RT2870 Usb Wireless Adapter in Ubuntu 10</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-02T00:00:00-05:00" pubdate data-updated="true">Jul 2<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Step 0 : At terminal, aaa@ubuntu:~$ sudo gedit /etc/modprobe.d/blacklist.conf. Add “blacklist rt2870usb” without quote at the end of the file, then save it.<br /><br />Step 1 : Download the latest rt2870 driver (<a href="http://www.ralinktech.com/support.php?s=2">here</a>) from Ralink.<br /><br />Step 2 : Untar the file and save to your home folder, and name it. (eg. the folder name is rt2870)<br /><br />Step 2.51 : According to the instruction I found in the internet, there should be another three steps done with the dongle: firstly, without plug your wireless usb at this moment, at terminal aaa@ubuntu:~$ type lsusb.<br /><br />Step 2.52 : Then plug in the wireless usb to the computer, type lsusb again, the&nbsp;wireless usb ID (8 digits)&nbsp;will be found. Write it down.<br /><br />Step 2.53 : Check it at aaa@ubuntu:~/rt2870/os/linux$, sudo gedit usb_main_dev.c. If the usb device is not included, add the wireless usb ID. Save the file. For example, the additional two lines are:<br />{USB_DEVICE(0x0B05,0x1761)}, /* Asus */<br />{USB_DEVICE(0x1761,0x0B05)}, /* Asus */<br /><br />Step 3 :&nbsp;In Makefile,&nbsp;set the &#8220;MODE = STA&#8221; in Makefile and chose the TARGET to Linux by set &#8220;TARGET = LINUX&#8221;. Then, change the directory of RT28XX_DIR in line 7 by &#8220;aaa@ubuntu:~$&nbsp;shell pwd&#8221;. Finally, via the command &#8220;aaa@ubuntu:~$&nbsp;shell uname -r&#8221;,&nbsp;define the linux kernel source include file path LINUX_SRC&nbsp;modify to meet your need.<br /><br />Step 4 : At same terminal , sudo gedit config.mk, and change two settings.<br /># Support Wpa_Supplicant<br />HAS_WPA_SUPPLICANT=n → y<br /># Support Native WpaSupplicant for Network Maganger<br />HAS_NATIVE_WPA_SUPPLICANT_SUPPORT=n → y<br /><br />Step 5 : At aaa@ubuntu:~/rt2870$, sudo gedit Makefile, check the folllowing at the top of the file:<br />RT28xx_MODE = STA<br />TARGET = LINUX<br />CHIPSET = 2870<br />If ok, close the file. If not, change the setting as above.<br /><br />Step 6: rt2870 2.2.00 version do not support kernel 2.6.31-14-generic, so you have to do a patch. The download link is <a href="http://launchpadlibrarian.net/35348337/rt2870-2.6.31.patch">here</a>, and the patch is via &#8220;patch -p1 &lt; rt2870-2.6.31.patch&#8221;.If you get a message of unable to patch, then download and install Patch_2.5.9-5_amd64.deb.<br /><br />Step 7 : At aaa@ubuntu:~/rt2870$, do the compilation.<br />sudo make uninstall<br />sudo make clean<br />sudo make<br />sudo make install<br /><br />Step 8 : At aaa@ubuntu:~$ sudo modprobe rt2870sta<br /><br />Step 9 : At aaa@ubuntu”~$ sudo gedit /etc/rc.local, add following two lines prior to exit0.<br />ifconfig ra0 up<br />pkill NetworkManager<br />save it, then at same terminal, sudo gedit /etc/modules, add rt2870sta, then save the file.<br /><br />Step 10 :At aaa@ubuntu:~$ ifconfig or iwconfig, you will see your wireless is up as ra0 or wlan0.<br /><br />Step 11 : Now configure networkmanager, use wep instead of wpa-psk or wpa2-psk. Your wireless will be able to connect to the internet. If there&#8217;s no connection, then do step 12.<br /><br />Step 12 : Update networkmanager. Go to System – Software Sources – Other software, add the following line<br />deb http://ppa.launchpad.net/network-manager/trunk/ubuntu karmic main<br /><br />That&#8217;s the end.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/01/20100701-digest-container/">Digest: Container</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-01T00:00:00-05:00" pubdate data-updated="true">Jul 1<span>st</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
将一个容器复制给另一个容器时，类型必须匹配：容器类型和元素类型都必须一致。<br /><br />迭代器first和last如果满足以下两点，则可以形成一个迭代器范围：1、它们指向同一个容器中的元素或超出末端的下一个位置；如果两个迭代器不相等，则对first反复应用自增加运算必须能够到达last，即，务必在使用前检查last绝对不能位于first之前。<br /><br />使用迭代器时，通常可以编写程序使得要求迭代器有效的代码范围较短。然后，在该范围内，严格检查每一条语句，判断是否有元素增加或者删除，从而相应的调整迭代器的值。此外，任何insert、push、assign操作都会导致原迭代器失效。当编写循环将元素插入到vector或deque容器中时，程序必须确保迭代器在每次循环后都得到更新。<br />vector&#8221;int&#8221;<int>::iterator first = v.begin(); //cache begin iterator<br />//safer: recalaulate end on each trip whenever the loop adds/erases elements<br />while (first != v.end()) { &nbsp;//do some processing in block&#8230;<br />&nbsp;&nbsp; &nbsp; //insert new value, meanwhile update the first iterator<br />&nbsp;&nbsp; &nbsp; first = v.insert(first, 42);<br />&nbsp;&nbsp; &nbsp; ++first; &nbsp; &nbsp;//advance first just past the element added just now<br />&nbsp;&nbsp; &nbsp; } &nbsp; &nbsp;//example ends<br />&nbsp;&nbsp; <br />在调用front或back函数之前，或者在对begin或end返回的迭代器进行解引用运算之前，必须保证容器非空。例如，进行 if(!ilist.empty()){&#8230;}的检查，否则，上述四个语句的操作都是没有定义的。</int><br /><br /><int></int>如果程序要求随机访问元素，则应使用vector或deque容器；如果程序必须在容器中间位置插入或者删除元素，则应采用list容器。如果无法确定某种应用应当采取哪种容器，则编写代码时应尝试只使用vector和list容器都提供的操作：使用迭代器，而不是下表，并且避免随机访问元素。这样编写代码，在必要的时候，可以很方便将程序从使用vector修改为使用list容器。</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/30/complangc-is-good-place/">comp.lang.c Is a Good Place:)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-30T00:00:00-05:00" pubdate data-updated="true">Jun 30<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
Q: I&#8217;m trying to define a few simple little function-like macros such as<br /><span class="Apple-tab-span" style="white-space: pre;">      </span>#define square(x) x * x<br />but they&#8217;re not always working.<br />&#8212;&#8212;&#8212;-<br />A: <b>There are three important rules to remember when defining function-like macros</b>:<br />The macro expansion must always be parenthesized to protect any lower-precedence operators from the surrounding expression. Given the (incorrect) square() macro above, the invocation<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>1 / square(n)<br />would expand to<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>1 / n * n<br />(which evaluates as (1 / n) * n), while what you want is<br /><span class="Apple-tab-span" style="white-space: pre;">       </span>1 / (n * n)<br />(In this case, the problem is one of associativity rather than precedence, but the effect is the same.)<br />Within the macro definition, all occurrences of the parameters must be parenthesized to protect any low-precedence operators in the actual arguments from the rest of the macro expansion. Again given the square() macro above, the invocation<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>square(n + 1)<br /><span class="Apple-tab-span" style="white-space: pre;"></span><br />would expand to<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>n + 1 * n + 1<br /><span class="Apple-tab-span" style="white-space: pre;"></span><br />But what you want is<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>(n + 1) * (n + 1)<br /><span class="Apple-tab-span" style="white-space: pre;"></span><br />If a parameter appears several times in the expansion, the macro may not work properly if the actual argument is an expression with side effects. Yet again given the square() macro above, the invocation<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>square(i++)<br />would expand to<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>i++ * i++<br />which is undefined (see question 3.2).<br />The proper definition of a square macro, to comply with rules 1 and 2 above, is<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>#define square(x) ((x) * (x))<br /><span class="Apple-tab-span" style="white-space: pre;"></span><br />Complying with rule 3 is harder. Sometimes, careful exploitation of the short-circuiting behavior of the &amp;&amp;, ||, or ?: operators (see question 3.6) can arrange that a parameter which appears several times is guaranteed to be evaluated exactly once. Sometimes, the macro is just documented as being unsafe, and callers must remember not to use it on arguments with side effects. Other times, it may be advisable not to compose a function-like macro if it can&#8217;t be made safe.<br />(As a stylistic convention, macros are often defined with capitalized or all-upper-case names, to make it obvious that they are macros. It may be acceptable to define a function-like macro with an all-lower-case name, if it truly simulates a function, but only if it complies with all three rules above. Since the squaring macro we&#8217;ve been discussing does not, it should be defined as something like<br /><span class="Apple-tab-span" style="white-space: pre;">&nbsp;</span><span class="Apple-style-span" style="white-space: pre;">      </span>#define Square(x) ((x) * (x))<span class="Apple-tab-span" style="white-space: pre;"> </span>/* UNSAFE */<br />if it is to be used at all.)<br /><br />References: K&amp;R1 Sec. 4.11 p. 87<br />K&amp;R2 Sec. 4.11.2 p. 90<br />H&amp;S Secs. 3.3.6,3.3.7 pp. 49-50<br />CT&amp;P Sec. 6.2 pp. 78-80<br /><a href="http://groups.google.com/group/comp.lang.c/browse_thread/thread/57175d098e52a10d?hl=en">original question</a></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/29/study-digest-standard-library-functions/">Study Digest: Standard Library Functions</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-29T00:00:00-05:00" pubdate data-updated="true">Jun 29<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
C vs. C++ 其中一个显式区别，就是后者增添了标准库类型，vector、string、bitset。<br /><br />以vector为例，实际上可将其看成是一个可变长度的数组，迭代器类比于增强版本的指针。而标准库函数最大的好处在于其成员函数，可以轻松地完成一些在C语言中需要特定代码段完成的功能。并且，就安全性而言，vector的迭代器也不必处处小心诸如指针初始化、或者指针越界之类的隐藏错误。<br /><br />而标准库函数中的string，比C语言中处理字符的char*，在实际应用中限制也更少。主要问题仍然是，C语言将字符串作为数组处理，则合并、拷贝时，必须考虑到起始点以及总长度的问题，这也就造成了代码块的可移植性受到了很大的限制。而C++不存在这样的问题，因为其语言的标准库处理所有的内存管理问题。只要在开始阶段定义了string型变量，则接下来的操作和一般的变量赋值加减的操作无异了。此外，C风格字符串一个更严重的缺陷在于默认null结尾字符的存在，strlen的返回值必须加一才是整个数组的真正长度，这样的细微之处很可能在数组操作时成为一个隐患。<br /><br />标准库提供的bitset操作，更直接，更容易阅读和书写、正确使用的可能性更高。而且，bitset对象的大小不受unsighed数的位数限制。通常来说，bitset优于整型数据的低级直接位操作。<br /><br />综上，C语言风格的内置数组和C++标准库函数相比，更易于出错，更难于理解难于调试，。所以除非是在极端要求代码执行速度的情况，否则使用C++的标准库函数更好。</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/28/digest-four-important-data-type-in-c/">Digest: Four Important Data Type in C++</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-28T00:00:00-05:00" pubdate data-updated="true">Jun 28<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<b>1.const的用法：</b><br />为什么使用const？采用符号常量写出的代码更容易维护；指针常常是边读边移动，而不是边写边移动；许多函数参数是只读不写的。const最常见用途是作为数组的界和switch分情况标号（也可以用枚举符代替）<br /><br />用法1：常量<br />取代了C中的宏定义，声明时必须进行初始化。const限制了常量的使用方式，并没有描述常量应该如何分配。如果编译器知道了某const的所有使用，它甚至可以不为该const分配空间。最简单的常见情况就是常量的值在编译时已知，而且不需要分配存储。（摘自《C++ Program Language》）用const声明的变量虽然增加了分配空间，但是可以保证类型安全。C标准中，const定义的常量是全局的。在C++中，const对象默认为定义它的文件的局部变量，那么把它定义在头文件中，也就意味着每个包含该头文件的源文件都有了自己的const变量，其名称和值都是一样的。<br /><br />用法2：指针和常量<br />使用指针时涉及到两个对象：该指针本身和被它所指的对象。将一个指针的声明用const“预先固定”将使那个对象而不是使这个指针成为常量。要将指针本身而不是被指对象声明为常量，必须使用声明运算符*const。所以出现在 * 之前的const是作为基础类型的一部分：<br />char *const cp; //到char的const指针<br />char const *pc1; //到const char的指针<br />const char *pc2; //到const char的指针（后两个声明是等同的）<br />从右向左读的记忆方式：<br />cp is a const pointer to char.<br />pc2 is a pointer to const char.<br /><br />用法3：const修饰函数传入参数<br />将函数传入参数声明为const，以指明使用这种参数仅仅是为了效率的原因，而不是想让调用函数能够修改对象的值。同理，将指针参数声明为const，函数将不修改由这个参数所指的对象。通常修饰指针参数和引用参数：<br />void Fun( const A *in); //修饰指针型传入参数<br />void Fun(const A &amp;in); //修饰引用型传入参数<br /><br />用法4：修饰函数返回值<br />可以阻止用户修改返回值。返回值也要相应的付给一个常量或常指针。<br /><br />用法5：const修饰成员函数<br />1、const对象只能访问const成员函数，而非const对象可以访问任意的成员函数，包括const成员函数；2、const对象的成员是不能修改的，而通过指针维护的对象确实可以修改的；3、const成员函数不可以修改对象的数据，不管对象是否具有const性质。编译时以是否修改成员数据为依据进行检查。<br /><br /><br /><b>2.static的用法：</b><br />静态变量作用范围在一个文件内，程序开始时分配空间，结束时释放空间，默认初始化为0，使用时可以改变其值。静态变量或静态函数只有本文件内的代码才能访问它，它的名字在其它文件中不可见。<br /><br />用法1：函数内部声明的static变量，可作为对象间的一种通信机制<br />如果一局部变量被声明为static，那么将只有唯一的一个静态分配的对象，它被用于在该函数的所有调用中表示这个变量。这个对象将只在执行线程第一次到达它的定义使初始化。<br /><br />用法2：局部静态对象<br />对于局部静态对象，构造函数是在控制线程第一次通过该对象的定义时调用。在程序结束时，局部静态对象的析构函数将按照他们被构造的相反顺序逐一调用，没有规定确切时间。<br /><br />用法3：静态成员和静态成员函数<br />如果一个变量是类的一部分，但却不是该类的各个对象的一部分，它就被成为是一个static静态成员。一个static成员只有唯一的一份副本，而不像常规的非static成员那样在每个对象里各有一份副本。同理，一个需要访问类成员，而不需要针对特定对象去调用的函数，也被称为一个static成员函数。需要注意，类的静态成员函数只能访问类的静态成员（变量或函数）。<br /><br /><b>3.extern的用法：</b><br />extern可以声明其他文件内定义的变量。在一个程序里，一个对象只能定义一次，它可以有多个声明，但类型必须完全一样。如果定义在全局作用域或者名字空间作用域里某一个变量没有初始化，它会被按照默认方式初始化。<br /><br />将变量或函数声明成外部链接，即该变量或函数名在其它函数中可见。被其修饰的变量（外部变量）是静态分配空间的，即程序开始时分配，结束时释放。在C++中，还可以指定使用另一语言链接，需要与特定的转换符一起使用。<br />extern “C” 声明语句<br />extern “C” { 声明语句块 }<br /><br />需要注意声明和定义之间的区别（from 《C++ Primer》）<br />extern int ival1; &nbsp; &nbsp; //it&#8217;s a&nbsp;declaration.<br />extern int ival2=10; &nbsp;//initializer, so it&#8217;s a definition.<br />double fica_rate; &nbsp; &nbsp; //no extern, so it&#8217;s a definition.<br />同一个程序中，有两个以上的文件含有上述对于同一个变量的任一种定义，都会导致多重定义链接错误。<br /><br /><br /><b>4.volatile的用法：</b><br />类型修正符（type-modifier），限定一个对象可被外部进程（操作系统、硬件或并发进程等）改变。volatile与变量连用，可以让变量被不同的线程访问和修改。常用于像中断处理程序之类的异步进程进行内存单元访问。声明时语法：<br />int volatile vInt;<br /><br />除了基本类型外，对用户定义类型也可以用volatile类型进行修饰。特别注意：可以把一个非volatile int赋给volatile int，但是不能把非volatile对象赋给一个volatile对象。一个有volatile标识符的类只能访问它接口的子集，一个由类的实现者控制的子集。用户只能用const_cast来获得对类型接口的完全访问。此外，volatile向const一样会从类传递到它的成员。</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/25/network-simulator/">Network Simulator</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-25T00:00:00-05:00" pubdate data-updated="true">Jun 25<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
最近一直在鼓捣网络仿真软件，逐渐发现些开源的好处，大家都在整理资料，都在去努力完善一个项目。当这样的行为发生在某一群向着相同目标进发的专业人士身上，似乎惺惺相惜的感觉就更加强烈。当然，我还只能算作业余，逐渐把自己用到的链接添加在这里，应该比仅仅下载到本地的作用会更大。<br /><br />Useful references (order from more basic to more complex):<br /><br /><a href="http://www-sop.inria.fr/maestro/personnel/Eitan.Altman/COURS-NS/n3.pdf">NS Simulator for Beginners, lecture notes</a> This is a very good point to begin with.<br /><a href="http://wcc.iiita.ac.in/ns/nstutorial.pdf">Sandeep Gupta NS tutorial</a>&nbsp; Very simple and straightforward slides.<br /><a href="http://nile.wpi.edu/NS/">NS by Examples</a> Practical breakpoints to get involved. The comments are also useful if the current version of ns-2 cannot debug the original code.<br /><a href="http://www.isi.edu/nsnam/ns/tutorial/index.html">Marc Greis&#8217; Tutorial</a>&nbsp; This is the classic and most important tutorial. It has been fully recommend to MASTER the step-by-step exercises it describes, especially if you are going to change the NS2 code. The Ping Agent that he describes is very important to do it yourself, instead of simply downloading the c++ files and compiling it. Furthermore, refer to this post on the ns2 mailing list to know the additional steps required on the ping agent on the newest versions of NS2. (<a href="http://mailman.isi.edu/pipermail/ns-users/2006-January/053697.html">click</a>)<br /><a href="http://nsnam.isi.edu/nsnam/index.php/Main_Page">New NS wiki</a> There are lots of information which order in a more structured way.<br /><a href="http://www-sop.inria.fr/mistral/personnel/Eitan.Altman/ns.htm">NS Simulator Courses for Beginner</a> Although it has BEGINNER in the caption, the destination is to check the scripts. We can also refer to the /ns/tcl/ex and /ns/tcl/test directories of ns2 source tree.<br /><a href="http://www.isi.edu/nsnam/ns/ns-documentation.html">NS Manual</a> is used to peek the reference documentation.<br /><a href="http://140.116.72.80/%7Esmallko/ns2/NS_From%20China.rar">NS中文手册</a><br /><a href="http://masimum.dif.um.es/nsrt-howto/pdf/nsrt-howto.pdf">Implementing a New Manet Unicast Routing Protocol in NS2</a><br /><a href="http://icapeople.epfl.ch/aad/teaching/ns/ns-2-for-the-impatient.pdf">ns2 for the Impatient</a><br /><a href="http://info.iet.unipi.it/%7Ecng/ns2measure/manual-060529.pdf">ns2measure manual</a><br /><br /><br />Personal web pages: <br /><a href="http://140.116.72.80/%7Esmallko/ns2/ns2.htm">柯志亨教授的主页</a> has many useful references and video guidance.<br /><a href="http://tagus.inesc-id.pt/%7Epestrela/ns2/">Pedro Vale Estrela&#8217;s NS2 Page</a><br /><a href="http://personal.ee.surrey.ac.uk/Personal/L.Wood/ns/">Lloyd Wood&#8217;s NS2 Page</a></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/25/million-dollar-baby/">Million Dollar Baby</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-25T00:00:00-05:00" pubdate data-updated="true">Jun 25<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
和L的电话里说了好多。这样一部感动我的电影，让我有了想要写下些什么的冲动。<br /><br />电影中可用以回顾的东西太多，以至于我很难用其中的某一句话给电影在豆瓣里做一个标记——以前我总是习惯如此，拿自认为感触最深的一句话作为电影的总结，我曾经看过了。但百万宝贝不是。里面的很多话，用弗里德曼磁性的声音，演绎的犹如寓言：Winner is simply willing to do the things that loser won&#8217;t&#8230;&#8230;Boxing is about respect. Getting it for yourself, and taking it away from the other guy&#8230;&#8230;If there&#8217;s magic in boxing: it&#8217;s the magic of fighting battles beyond endurance, beyond cracked ribs, ruptured kidneys, and detached retinas&#8230;&#8230;<b>It&#8217;s the magic of risking everything for a dream that nobody sees but you</b>&#8230;&#8230;Frankie liked to say that boxing is an unnatural act that everything in boxing is backwards. Sometimes, best way to deliver a punch is step back. But step back too far, you ain&#8217;t fighting at all&#8230;&#8230;.Boxing is an unnatural act. Because everything in it is backwards. You wanna move to the left you don&#8217;t step left, you push on the right toe. To move right, you use your left toe. Instead of running from the pain, like a sane person would do, you step into it&#8230;&#8230;<br /><br />看过开头，如同monga，我料到这会是悲剧一出。很久以前看到的一句话分外贴切，我们是糖，甜到哀伤。maggie，剧中出场时还有月余就满32岁的小女人。微笑着，面对埃斯特伍德一次次冷血的拒绝。微笑着，把食客们吃剩的牛扒包进锡纸里，并笑着告诉老板要拿它回家喂小狗。微笑着，拿过弗里德曼手中破旧的拳击鞋和speed ball，说自己先借着，买了就还回来。微笑着，拿到两美元小费攒齐了买新speed ball的所有钱，然后欣喜的在体育用品店老板柜台上掏出一大堆硬币以及小额钞票，这是她给自己32岁买的生日礼物。当然，埃斯特伍德决定收她为徒时候，她笑得更加灿烂。以及每次打赢比赛，都笑得很傻，问埃斯特伍德，老板，我打的不错吧。<br /><br />当然，她也有不笑的时候。比如镜头几次切换到她回家的公车上。藏在宽大的套头衫里，她表情严峻的注视着窗外；或者正在一口水，一口剩牛排，吃着晚餐。在家的时候，拿一个小本子，细心地记下每一小笔收入，算着再过多久能买个speed ball，或者还要再攒多久，可以给妈妈和妹妹买套房子。还有在gym的时候，永远在专注的全力以赴。<br /><br />三位主角，独自一人时，幽怨而缓慢的吉他配乐。训练室里的荤笑话和一群粗人挑逗的笑声。拳击场旁观中的尖叫声。还有出现很多的，拳头打击沙袋或者speed ball的声音，短促而有力。所有的这些声响，叠加在一起，观看时候，就实实在在的堵在我胸口上。<br /><br />她的结局，似乎早已注定。专注和不知疲惫的奉献，成就了这个世界冠军；而纯真又不知自我保护，让她在这个险恶的世界里，从伤痕累累最终倒下不起。看到最后才发觉，原来见方的拳击台，只是作者表达思想而戏剧化出来的一个舞台而已。光阴在此，演绎的更加绚烂而摄人心魄。一个人从降生开始，生命就成了无数的随机事件不断累积之和，加之事物与生俱来的两面性，很难讲如何才能够善始善终。言行无愧于本心，尽力而无愧于时间，倒是可以做到且要时刻警醒达到的。<br /><br />弗里德曼在影片最后宽慰埃斯特伍德的一段话：Maggie walked through that door with nothing but guts. No chance in the world of being what she needed to be. A year and a half later, she&#8217;s fighting for the championship of the world. You did that. People die every day, Frankie. Mopping floors, washing dishes. And you know what their last thought is?&#8211;&#8220;I never got my shot.&#8221; Because of you, Maggie got her shot. If she dies today, you know what her last thought will be?&#8211;&#8220;I think I did all right. I know I could rest with that.&#8221;</div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/14/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/12/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/10/01/tennis-progress-in-october/">Tennis Progress in October</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/24/wired-in-and-schedule-sequential-workflow/">Wired In and Schedule Sequential Workflow</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/10/tennis-progress-in-september/">Tennis Progress in September</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/30/third-season-of-3-dot-0-ends-up-with-2nd-place/">Third Season of 3.0 Ends Up with 2nd Place</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/17/3-dot-0-league-for-the-third-time/">3.0 League for the Third Time</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  <a href="https://github.com/creasyw">Qiong Wu</a> &copy;2009-2014 &mdash;
  <span class="credit">Thanks to <a href="http://ayyang.com">Alex Yang</a>, <a href="http://octopress.org/">Octopress</a> and <a href="https://github.com/">Github</a>.</span><br>
  send me an email 
<script type="text/javascript">
var emailriddlerarray=[99,114,101,97,115,121,119,117,113,105,111,110,103,64,103,109,97,105,108,46,99,111,109]
var encryptedemail_id82='' //variable to contain encrypted email 
for (var i=0; i<emailriddlerarray.length; i++)
 encryptedemail_id82+=String.fromCharCode(emailriddlerarray[i])
 document.write('<a href="mailto:'+encryptedemail_id82+'"><img src="/img/email.png" alt="Qiong" /></a>')
</script>
</p>
</footer>
</body>
</html>
